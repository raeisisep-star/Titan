# 🚀 دستورالعمل اجرای نهایی Phase 4

**تاریخ:** 1403/07/29 (2025-10-20)  
**وضعیت:** ✅ آماده برای اجرا  
**نیاز:** دسترسی sudo

---

## ⚡ یک دستور برای تکمیل:

```bash
cd /home/ubuntu/Titan
sudo ./apply-ssl-enhancements.sh
```

این دستور **همه چیز را خودکار** انجام می‌دهد:
- ✅ بک‌آپ می‌گیرد
- ✅ کانفیگ جدید را اعمال می‌کند
- ✅ تست می‌کند
- ✅ Nginx را reload می‌کند
- ✅ در صورت خطا rollback می‌کند

---

## 📋 مراحل بعدی:

### 1. تست کامل
```bash
cd /home/ubuntu/Titan
./scripts/test-ssl-acceptance.sh
```
**انتظار:** 8/8 تست موفق ✅

### 2. تأیید دستی
```bash
# HSTS
curl -I https://www.zala.ir | grep -i strict

# Security Headers
curl -I https://www.zala.ir | grep -E 'X-Frame|X-Content|X-XSS'

# Health
curl -sS https://www.zala.ir/api/health | jq -r '.data.status'
```

### 3. بررسی Cloudflare
1. ورود به: https://dash.cloudflare.com
2. انتخاب: zala.ir
3. SSL/TLS → Overview
4. تأیید: **Full (strict)** ✅
5. اسکرین‌شات

### 4. ثبت در PR #10
لینک: https://github.com/raeisisep-star/Titan/pull/10

شامل:
- خروجی تست‌ها (8/8)
- اسکرین‌شات Cloudflare
- زمان اجرا

---

## 🔙 Rollback (در صورت مشکل)

```bash
LATEST_BACKUP=$(ls -t /etc/nginx/sites-available/zala.backup.* | head -1)
sudo cp "$LATEST_BACKUP" /etc/nginx/sites-available/zala
sudo nginx -t && sudo systemctl reload nginx
```

---

## 📊 قبل و بعد

### قبل (الان):
```
✅ SSL: معتبر
❌ HSTS: ندارد
❌ Security Headers: ندارد
```

### بعد (پس از اجرا):
```
✅ SSL: معتبر
✅ HSTS: فعال (1 سال)
✅ Security Headers: همه موجود
✅ OCSP Stapling: فعال
```

---

## ⏱️ زمان تخمینی: 5 دقیقه

---

## 📁 فایل‌های کامل:
- `FINAL_EXECUTION_STEPS.md` - دستورالعمل کامل انگلیسی
- `PHASE4_CURRENT_STATUS.md` - گزارش وضعیت
- `nginx-zala-ssl-enhanced.conf` - کانفیگ آماده
- `apply-ssl-enhancements.sh` - اسکریپت اجرا

---

**موفق باشید! 🔐**
