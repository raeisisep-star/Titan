<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Alerts</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/axios@1.6.0/dist/axios.min.js"></script>
</head>
<body class="bg-gray-900 text-white">
    <div class="container mx-auto p-4">
        <h1 class="text-2xl mb-4">Test Alerts Functions</h1>
        
        <div id="test-results" class="mb-6 p-4 bg-gray-800 rounded"></div>
        
        <div class="space-x-4 space-x-reverse">
            <button onclick="testShowCreateAlert()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded">
                تست هشدار جدید
            </button>
            <button onclick="testLoadTemplates()" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded">
                تست قالب‌ها
            </button>
            <button onclick="testNotificationSettings()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded">
                تست اطلاع‌رسانی‌ها
            </button>
        </div>
    </div>

    <!-- Load alerts module -->
    <script src="/static/modules/alerts.js"></script>
    
    <script>
        function logResult(message) {
            const results = document.getElementById('test-results');
            results.innerHTML += '<div>' + new Date().toLocaleString() + ': ' + message + '</div>';
        }

        function testShowCreateAlert() {
            logResult('Testing showCreateAlertModal...');
            try {
                if (typeof window.showCreateAlertModal === 'function') {
                    window.showCreateAlertModal();
                    logResult('✅ showCreateAlertModal called successfully');
                } else {
                    logResult('❌ showCreateAlertModal not found, type: ' + typeof window.showCreateAlertModal);
                }
            } catch (error) {
                logResult('❌ Error calling showCreateAlertModal: ' + error.message);
            }
        }

        function testLoadTemplates() {
            logResult('Testing loadAlertTemplates...');
            try {
                if (typeof window.loadAlertTemplates === 'function') {
                    window.loadAlertTemplates();
                    logResult('✅ loadAlertTemplates called successfully');
                } else {
                    logResult('❌ loadAlertTemplates not found, type: ' + typeof window.loadAlertTemplates);
                }
            } catch (error) {
                logResult('❌ Error calling loadAlertTemplates: ' + error.message);
            }
        }

        function testNotificationSettings() {
            logResult('Testing openNotificationSettings...');
            try {
                if (typeof window.openNotificationSettings === 'function') {
                    window.openNotificationSettings();
                    logResult('✅ openNotificationSettings called successfully');
                } else {
                    logResult('❌ openNotificationSettings not found, type: ' + typeof window.openNotificationSettings);
                }
            } catch (error) {
                logResult('❌ Error calling openNotificationSettings: ' + error.message);
            }
        }

        // Test function availability after page load
        window.addEventListener('load', function() {
            logResult('Page loaded. Testing function availability...');
            logResult('showCreateAlertModal: ' + typeof window.showCreateAlertModal);
            logResult('loadAlertTemplates: ' + typeof window.loadAlertTemplates);
            logResult('openNotificationSettings: ' + typeof window.openNotificationSettings);
            logResult('refreshAlertsData: ' + typeof window.refreshAlertsData);
            logResult('AlertsManager: ' + typeof window.AlertsManager);
            logResult('alertsManager: ' + typeof window.alertsManager);
        });
    </script>
</body>
</html>